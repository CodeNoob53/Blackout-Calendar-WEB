# Історія змін

Усі помітні зміни в цьому проєкті будуть задокументовані в цьому файлі.


## [2.2.3] - 2026-02-08

### Виправлено
- **Перепідписка на push-сповіщення**: Виправлено помилку, коли перепідписка не працювала після отримання 404 від бекенду (підписка не знайдена). Тепер система отримує свіжу підписку від Service Worker замість використання застарілого стану, і створює нову підписку за потреби.

---

## [2.2.2] - 2026-02-06

### Додано
- Рефакторинг системи сповіщень у окремі хуки (історія, налаштування, push, polling, SW‑повідомлення, системні сповіщення).

### Покращено
- Підвищено надійність сповіщень за 30 хв (вікно часу + підтримка переходу через північ).

### Виправлено
- Очищення історії сповіщень тепер видаляє дані і в IndexedDB, і в localStorage.
- Виправлено відсутній i18n‑ключ для повідомлення про недоступний сервер.

---

## [2.2.1] - 2026-02-06

### Виправлено
- Відновлено офлайн‑фолбек: показ кешованих графіків, коли API недоступне або немає звʼязку.

### Змінено
- Рефакторинг початкового запиту графіка на Axios.
- Розмітку оновлено на семантичні HTML‑теги.

---

## [2.2.0] - 2025-12-22

### Додано
- **Система інтернаціоналізації (i18n)**:
  - Повна підтримка i18n на базі бібліотеки `react-i18next`.
  - Визначення мови з localStorage і налаштувань браузера.
  - 10 файлів перекладу (українська та англійська) у 5 просторах імен (common, ui, notifications, errors, schedule).
  - Типобезпечні переклади TypeScript через `CustomTypeOptions`.
  - Хук `useLanguageSync` для автоматичної синхронізації з бекендом через заголовок `Accept-Language`.

- **Компонент перемикання мови**:
  - Двомовний перемикач (десктопне випадаюче меню + мобільний список).
  - Інтеграція в десктопний хедер і мобільне бургер‑меню.
  - Підтримка української та англійської мов з іконками прапорів.
  - Збереження вибору мови в localStorage.

- **Мобільне бургер‑меню**:
  - Повноекранне мобільне меню навігації з плавною анімацією.
  - Секція налаштувань (мова, тема, сповіщення).
  - Навігаційні посилання (GitHub API, GitHub WEB).
  - Інфо‑секція з відображенням версії та переглядом історії змін.
  - Фокус‑трап для доступності.
  - Закриття клавішею Escape.
  - Аккордеон перемикання мови з анімацією.

- **Перегляд історії змін**:
  - Інтерактивне модальне вікно з парсингом markdown.
  - Форматовані розділи (Додано, Покращено, Виправлено, Змінено).
  - Бейджі версій і дати релізів.
  - Доступ з інфо‑секції бургер‑меню.
  - Адаптивний дизайн для мобільних пристроїв.

- **Уніфікована система анімацій**:
  - Анімація `slideInRight` (0.25s cubic‑bezier) для бургер‑меню.
  - Desktop‑модалка NotificationCenter отримала `modalFadeScale`.
  - Мобільні модалки — миттєві переходи для кращого UX.
  - Анімації на GPU‑трансформаціях.

### Покращено
- **Оптимізації продуктивності**:
  - Універсальна CSS‑змінна `--glass-blur` для запобігання repaint під час зміни теми.
  - Усі `glass-card` використовують спільну змінну розмиття (`blur(16px)`).
  - Прибрано `backdrop-filter: blur()` з бекдропів для зменшення навантаження на GPU.
  - Додано `will-change: transform, opacity` для анімованих елементів.
  - Додано `transform: translate3d(0, 0, 0)` для GPU‑прискорення.
  - Додано `contain: content` для ізоляції лейауту.
  - `body.modal-open` і `body.menu-open` вимикають blur під час відкритих модалок/меню.

- **Переклади компонентів**:
  - Перекладено UI‑тексти в App.tsx, Header.tsx, Footer.tsx.
  - Перекладено понад 30 текстів у NotificationCenter.tsx.
  - Усі повідомлення сповіщень підтримують українську та англійську.
  - Екстрені сповіщення мають локалізовані заголовки.

- **Mobile UX**:
  - Бургер‑меню займає всю ширину екрана (100%) замість 85%.
  - Висота хедера модалки 4rem для кращих touch‑таргетів.
  - Додано кнопку “Назад” у NotificationCenter для мобільної навігації.
  - Перемикач мови в бургер‑меню показує активний вибір з галочкою.
  - Додано бейдж непрочитаних сповіщень на бургер‑кнопці і в меню.

### Виправлено
- **Оновлення безпеки React**:
  - React оновлено з 19.2.0 до 19.2.3 як превентивний захід проти CVE‑2025‑55182, CVE‑2025‑55184, CVE‑2025‑67779.
  - У попередній версії не використовувалися вразливі можливості, але оновлено з міркувань безпеки.
  - Зміни задокументовані в README.md.

- **Дедуплікація екстрених сповіщень**:
  - Виправлено дублювання екстрених сповіщень.
  - Service Worker використовує стабільний tag для групування за днем.
  - Фронтенд відстежує оброблені екстрені сповіщення, щоб уникнути повторів.
  - Нові екстрені повідомлення замінюють попередні.

- **Ключі перекладу**:
  - Виправлено несумісні ключі (наприклад, `subscriptionActivatedMessage` → `subscriptionActivatedDesc`).
  - Оновлено переклади графіків відповідно до формату бекенду.
  - Додано інтерполяцію для динамічних значень (час, дата).

### Змінено
- Бекдропи модалок і бургер‑меню більше не використовують `backdrop-filter`.
- Ефект розмиття `glass-card` використовує CSS‑змінну для консистентності між темами.
- NotificationCenter можна використовувати в керованому режимі через `isOpen` та `onOpenChange`.
- Мобільний перемикач мови інтегровано в акордеон бургер‑меню.

---

## [2.1.0] - 2025-12-21

### Додано
- **Глобальні оптимізації продуктивності**:
  - GPU‑прискорення для анімацій модалок і меню через `will-change` та `translate3d`.
  - Ізоляція лейауту (`contain: content`) для зменшення reflow.
- **Оптимізація перемикання теми**:
  - Логіка `no-transitions` для запобігання “paint storms”.
  - Зменшено тривалість переходу фону при зміні теми.
- **Керування фоновими ресурсами**:
  - Динамічне вимкнення `backdrop-filter` і `filter` на `app-root` при активних важких компонентах (модалки/меню).
- **Документація**:
  - Додано [Optimization Guide](docs/optimization-guide.md).

### Покращено
- Анімації відкриття модалок стали значно плавнішими (60FPS) на десктопі та мобільних.
- Перемикання теми на мобільних тепер миттєве, без лагів.

---

## [2.0.0] - 2025-12-10

### Додано
- Початковий реліз оновленого Blackout Calendar WEB.
- Підтримка кількох черг.
- Система push‑сповіщень.
- Багатомовність (UK/EN).
